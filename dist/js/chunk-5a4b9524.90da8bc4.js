(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a4b9524"],{"203b":function(e,t,c){"use strict";c("70d0")},"314a":function(e,t,c){},"3ea2":function(e,t,c){"use strict";c("99af"),c("b0c0"),c("a4d3"),c("e01a");var n=c("7a23");Object(n["A"])("data-v-f52517de");var o={class:"card-body d-flex flex-column align-items-start"},i={class:"card-title mb-0"},l={class:"mb-1"},a={class:"mb-2 "},r={class:"me-1"},d={class:"card-text mb-auto"},s={class:"card-img-right image-wrapper"};function b(e,t,c,b,u,m){var p=Object(n["G"])("Buttons"),O=Object(n["G"])("Image");return Object(n["x"])(),Object(n["h"])("div",null,[Object(n["i"])("div",{class:Object(n["r"])("card bg-".concat(e.theme," text-").concat(e.textTheme," flex-md-nowrap flex-wrap-reverse flex-row flex-1-1 mb-4 box-shadow"))},[Object(n["i"])("div",o,[Object(n["i"])("h3",i,Object(n["J"])(m.getValidName),1),Object(n["i"])("div",l,Object(n["J"])(c.collection.topic.name),1),Object(n["i"])("div",a,[Object(n["i"])("strong",r,Object(n["J"])(e.$t("component.collection.collection-head.title-1")),1),Object(n["j"])(Object(n["J"])(m.date),1)]),Object(n["i"])("p",d,Object(n["J"])(c.collection.description),1),Object(n["k"])(p,{class:"flex-md-nowrap mt-3",buttons:c.buttons},null,8,["buttons"])]),Object(n["i"])("div",s,[c.collection.id?(Object(n["x"])(),Object(n["f"])(O,{key:0,idCollection:c.collection.id},null,8,["idCollection"])):Object(n["g"])("",!0)])],2)])}Object(n["y"])();var u=c("5530"),m=c("aa14"),p=c("9666"),O=c("5502"),j={props:{collection:{type:Object,required:!0},buttons:{type:Array}},components:{Image:m["a"],Buttons:p["a"]},computed:Object(u["a"])(Object(u["a"])({},Object(O["c"])(["lang","theme","themeText"])),{},{date:function(){return moment(this.collection.createdAt).locale(this.lang).fromNow()},getValidName:function(){return this.collection.name||this.$t("component.collection.collection-head.title-2")}})};c("203b");j.render=b,j.__scopeId="data-v-f52517de";t["a"]=j},"70d0":function(e,t,c){},"8c5f":function(e,t,c){"use strict";c("314a")},accb:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),o={class:"mb-2"},i=Object(n["i"])("hr",null,null,-1),l={class:"text-center mb-5"},a={class:"d-flex justify-content-center p-2"};function r(e,t,c,r,d,s){var b=Object(n["G"])("Head"),u=Object(n["G"])("Edit");return Object(n["x"])(),Object(n["h"])("div",null,[Object(n["i"])("div",o,[Object(n["k"])(b,{collection:d.collection,buttons:s.buttons},null,8,["collection","buttons"])]),Object(n["i"])("div",null,[i,Object(n["i"])("h3",l,[Object(n["i"])("strong",null,Object(n["J"])(e.$t("view.collection-edit.title-1")),1),Object(n["i"])("div",a,[Object(n["k"])(u,{collection:d.collection},null,8,["collection"])])])])])}var d=c("1da1"),s=c("5530"),b=(c("96cf"),c("3ea2"));c("99af"),c("b0c0"),c("a4d3"),c("e01a");Object(n["A"])("data-v-16cb1960");var u={class:"card-body"},m={class:"form-outline border rounded-3 mb-2 "},p={class:"form-outline border rounded-3 mb-2"},O={class:"form-outline border rounded-3 mb-2"},j=["disabled"];function f(e,t,c,o,i,l){var a=Object(n["G"])("DropZone"),r=Object(n["G"])("Multiselect");return Object(n["x"])(),Object(n["h"])("div",{class:Object(n["r"])("card w-100 shadow-sm bg-".concat(e.theme," text-").concat(e.themeText))},[Object(n["i"])("div",u,[Object(n["i"])("form",{onSubmit:t[3]||(t[3]=Object(n["V"])((function(){return l.editCollection&&l.editCollection.apply(l,arguments)}),["prevent"]))},[Object(n["i"])("div",m,[Object(n["k"])(a,{id:c.id},null,8,["id"])]),Object(n["i"])("div",p,[Object(n["U"])(Object(n["i"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.editedCollection.name=e}),type:"text",id:"form8Example1",class:Object(n["r"])("form-control ".concat(i.editedCollection.name&&"active"," text-").concat(e.themeText))},null,2),[[n["P"],i.editedCollection.name]]),Object(n["i"])("label",{for:"form8Example1",class:Object(n["r"])("form-label fs-6 text-".concat(e.themeText))},Object(n["J"])(e.$t("component.collection.change.edit.name")),3)]),Object(n["k"])(r,{modelValue:i.editedCollection.topic.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.editedCollection.topic.name=e}),placeholder:e.$t("component.collection.change.edit.search-1"),label:"name",trackBy:"name",options:e.topics,searchable:!0,class:"mb-2 text-black"},{option:Object(n["T"])((function(e){var t=e.option;return[Object(n["j"])(Object(n["J"])(t.name),1)]})),_:1},8,["modelValue","placeholder","options"]),Object(n["i"])("div",O,[Object(n["U"])(Object(n["i"])("textarea",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.editedCollection.description=e}),class:Object(n["r"])("form-control ".concat(i.editedCollection.description&&"active"," text-").concat(e.themeText)),id:"form4Example3",rows:"4"},null,2),[[n["P"],i.editedCollection.description]]),Object(n["i"])("label",{class:Object(n["r"])("form-label fs-6 text-".concat(e.themeText)),for:"form4Example3"},Object(n["J"])(e.$t("component.collection.change.edit.description")),3)]),Object(n["i"])("button",{type:"submit",class:"w-100 btn btn-lg btn-secondary",disabled:l.disabled},Object(n["J"])(e.$t("component.collection.change.edit.button")),9,j)],32)])],2)}Object(n["y"])();c("a9e3"),c("7db0"),c("b64b");var h=c("e583"),v=c("a306"),x=c("5502"),g={components:{DropZone:h["a"],Multiselect:v["a"]},props:{id:{type:Number,required:!0},collection:{type:Object,required:!0}},data:function(){return{blocked:!1,editedCollection:Object(s["a"])({},this.collection)}},computed:Object(s["a"])(Object(s["a"])({},Object(x["c"])(["topics","theme","themeText","uppy","isAdmin"])),{},{topicId:function(){var e,t=this;return(null===(e=this.topics.find((function(e){return e.name===t.editedCollection.topic.name})))||void 0===e?void 0:e.id)||-1},disabled:function(){return-1==this.topicId||this.blocked}}),methods:Object(s["a"])(Object(s["a"])({},Object(x["b"])(["EDIT_MY_COLLECTION","EDIT_COLLECTION","DELETE_IMAGE"])),{},{editMyCollection:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.EDIT_MY_COLLECTION({id:e.editedCollection.id,name:e.editedCollection.name,description:e.editedCollection.description,id_topic:e.topicId,image:e.editedCollection.image});case 2:case"end":return t.stop()}}),t)})))()},editCollectionById:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.EDIT_COLLECTION({id:e.editedCollection.id,name:e.editedCollection.name,description:e.editedCollection.description,id_topic:e.topicId,image:e.editedCollection.image});case 2:case"end":return t.stop()}}),t)})))()},editCollection:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.blocked=!0,!(Object.keys(e.uppy.store.state.files).length>0)){t.next=9;break}return t.next=5,e.uppy.upload();case 5:return e.editedCollection.image=t.sent,e.editedCollection.image=e.editedCollection.image.successful[0].response.body.msg.name,t.next=9,e.DELETE_IMAGE(e.editedCollection.id);case 9:if(!e.isAdmin){t.next=14;break}return t.next=12,e.editCollectionById();case 12:t.next=16;break;case 14:return t.next=16,e.editMyCollection();case 16:e.$router.push("/collection/".concat(e.$route.params.id)),t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](0),e.$toast.error((null===(c=t.t0.response.data)||void 0===c?void 0:c.msg)||e.$t("component.collection.change.edit.error")),setTimeout(e.$toast.clear,3e3);case 23:return t.prev=23,e.blocked=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[0,19,23,26]])})))()}})};c("8c5f");g.render=f,g.__scopeId="data-v-16cb1960";var C=g,w={components:{Edit:C,Head:b["a"]},data:function(){return{collection:null}},computed:Object(s["a"])(Object(s["a"])({},Object(x["c"])(["user","isAdmin"])),{},{buttons:function(){return[{to:"",class:"btn btn-lg btn-outline-primary",show:!0,text:this.$t("view.collection-edit.buttons.title-1"),handler:this.getBack}]},isMyPage:function(){var e,t;return(null===(e=this.user)||void 0===e?void 0:e.id)==(null===(t=this.collection)||void 0===t?void 0:t.id_user)},restricted:function(){return!(this.user.id&&(this.isMyPage||this.isAdmin))}}),methods:Object(s["a"])(Object(s["a"])({},Object(x["b"])(["GET_COLLECTION"])),{},{getBack:function(){this.$router.go(-1)}}),created:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GET_COLLECTION(e.$route.params.id);case 2:e.collection=t.sent,e.collection&&!e.restricted||e.$router.push("/page404");case 4:case"end":return t.stop()}}),t)})))()}};w.render=r;t["default"]=w}}]);
//# sourceMappingURL=chunk-5a4b9524.90da8bc4.js.map