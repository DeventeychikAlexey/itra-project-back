(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65be4cf8"],{"3ea2":function(e,t,c){"use strict";c("b0c0"),c("a4d3"),c("e01a");var n=c("7a23");Object(n["A"])("data-v-1146aad0");var o={class:"card flex-md-nowrap flex-wrap-reverse flex-row flex-1-1 mb-4 box-shadow "},i={class:"card-body d-flex flex-column align-items-start"},a={class:"card-title mb-0"},r={class:"mb-1"},l={class:"mb-2 text-muted"},d=Object(n["i"])("strong",{class:"me-1"},"Создано:",-1),s={class:"card-text mb-auto"},b={class:"card-img-right image-wrapper"};function u(e,t,c,u,m,p){var O=Object(n["G"])("Buttons"),j=Object(n["G"])("Image");return Object(n["x"])(),Object(n["h"])("div",null,[Object(n["i"])("div",o,[Object(n["i"])("div",i,[Object(n["i"])("h3",a,Object(n["J"])(p.getValidName),1),Object(n["i"])("div",r,Object(n["J"])(c.collection.topic.name),1),Object(n["i"])("div",l,[d,Object(n["j"])(Object(n["J"])(p.date),1)]),Object(n["i"])("p",s,Object(n["J"])(c.collection.description),1),Object(n["k"])(O,{class:"flex-md-nowrap mt-3",buttons:c.buttons},null,8,["buttons"])]),Object(n["i"])("div",b,[Object(n["k"])(j,{idCollection:c.collection.id},null,8,["idCollection"])])])])}Object(n["y"])();var m=c("5530"),p=c("aa14"),O=c("9666"),j=c("5502"),f={props:{collection:{type:Object,required:!0},buttons:{type:Array}},components:{Image:p["a"],Buttons:O["a"]},computed:Object(m["a"])(Object(m["a"])({},Object(j["c"])(["lang"])),{},{date:function(){return moment(this.collection.createdAt).locale(this.lang).fromNow()},getValidName:function(){return this.collection.name||"Без названия"}})};c("9adf");f.render=u,f.__scopeId="data-v-1146aad0";t["a"]=f},"660d":function(e,t,c){},"7be1":function(e,t,c){"use strict";c("f51f")},"9adf":function(e,t,c){"use strict";c("660d")},accb:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),o={class:"mb-2"},i=Object(n["i"])("hr",null,null,-1),a={class:"text-center mb-5"},r=Object(n["i"])("strong",null," Изменить коллекцию",-1),l={class:"d-flex justify-content-center p-2"};function d(e,t,c,d,s,b){var u=Object(n["G"])("Head"),m=Object(n["G"])("Edit");return Object(n["x"])(),Object(n["h"])("div",null,[Object(n["i"])("div",o,[Object(n["k"])(u,{collection:s.collection,buttons:b.buttons},null,8,["collection","buttons"])]),Object(n["i"])("div",null,[i,Object(n["i"])("h3",a,[r,Object(n["i"])("div",l,[Object(n["k"])(m,{collection:s.collection},null,8,["collection"])])])])])}var s=c("1da1"),b=c("5530"),u=(c("96cf"),c("3ea2"));c("99af"),c("b0c0"),c("a4d3"),c("e01a");Object(n["A"])("data-v-7eb79e8d");var m={class:"card-body"},p={class:"form-outline border rounded-3 mb-2 "},O={class:"form-outline border rounded-3 mb-2"},j={class:"form-outline border rounded-3 mb-2"},f=["disabled"];function h(e,t,c,o,i,a){var r=Object(n["G"])("DropZone"),l=Object(n["G"])("Multiselect");return Object(n["x"])(),Object(n["h"])("div",{class:Object(n["r"])("card w-100 shadow-sm bg-".concat(e.theme," text-").concat(e.themeText))},[Object(n["i"])("div",m,[Object(n["i"])("form",{onSubmit:t[3]||(t[3]=Object(n["V"])((function(){return a.editCollection&&a.editCollection.apply(a,arguments)}),["prevent"]))},[Object(n["i"])("div",p,[Object(n["k"])(r,{id:c.id},null,8,["id"])]),Object(n["i"])("div",O,[Object(n["U"])(Object(n["i"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.editedCollection.name=e}),type:"text",id:"form8Example1",class:Object(n["r"])("form-control ".concat(i.editedCollection.name&&"active"))},null,2),[[n["P"],i.editedCollection.name]]),Object(n["i"])("label",{for:"form8Example1",class:Object(n["r"])("form-label fs-6 text-".concat(e.themeText))},Object(n["J"])(e.$t("component.collection.create.name")),3)]),Object(n["k"])(l,{modelValue:i.editedCollection.topic.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.editedCollection.topic.name=e}),placeholder:e.$t("component.collection.create.searchPlaceholder"),label:"name",trackBy:"name",options:e.topics,searchable:!0,class:"mb-2 text-black"},{option:Object(n["T"])((function(e){var t=e.option;return[Object(n["j"])(Object(n["J"])(t.name),1)]})),_:1},8,["modelValue","placeholder","options"]),Object(n["i"])("div",j,[Object(n["U"])(Object(n["i"])("textarea",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.editedCollection.description=e}),class:Object(n["r"])("form-control ".concat(i.editedCollection.description&&"active")),id:"form4Example3",rows:"4"},null,2),[[n["P"],i.editedCollection.description]]),Object(n["i"])("label",{class:Object(n["r"])("form-label fs-6 text-".concat(e.themeText)),for:"form4Example3"},Object(n["J"])(e.$t("component.collection.create.description")),3)]),Object(n["i"])("button",{type:"submit",class:"w-100 btn btn-lg btn-secondary",disabled:a.disabled}," Изменить ",8,f)],32)])],2)}Object(n["y"])();c("a9e3"),c("7db0"),c("b64b");var v=c("e583"),x=c("a306"),C=c("5502"),g={components:{DropZone:v["a"],Multiselect:x["a"]},props:{id:{type:Number,required:!0},collection:{type:Object,required:!0}},data:function(){return{blocked:!1,editedCollection:Object(b["a"])({},this.collection)}},computed:Object(b["a"])(Object(b["a"])({},Object(C["c"])(["topics","theme","themeText","uppy","isAdmin"])),{},{topicId:function(){var e,t=this;return(null===(e=this.topics.find((function(e){return e.name===t.editedCollection.topic.name})))||void 0===e?void 0:e.id)||-1},disabled:function(){return-1==this.topicId||this.blocked}}),methods:Object(b["a"])(Object(b["a"])({},Object(C["b"])(["EDIT_MY_COLLECTION","EDIT_COLLECTION","DELETE_IMAGE"])),{},{editMyCollection:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.EDIT_MY_COLLECTION({id:e.editedCollection.id,name:e.editedCollection.name,description:e.editedCollection.description,id_topic:e.topicId,image:e.editedCollection.image});case 2:case"end":return t.stop()}}),t)})))()},editCollectionById:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.EDIT_COLLECTION({id:e.editedCollection.id,name:e.editedCollection.name,description:e.editedCollection.description,id_topic:e.topicId,image:e.editedCollection.image});case 2:case"end":return t.stop()}}),t)})))()},editCollection:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.blocked=!0,!(Object.keys(e.uppy.store.state.files).length>0)){t.next=9;break}return t.next=5,e.uppy.upload();case 5:return e.editedCollection.image=t.sent,e.editedCollection.image=e.editedCollection.image.successful[0].response.body.msg.name,t.next=9,e.DELETE_IMAGE(e.editedCollection.id);case 9:if(!e.isAdmin){t.next=14;break}return t.next=12,e.editCollectionById();case 12:t.next=16;break;case 14:return t.next=16,e.editMyCollection();case 16:e.$router.push("/collection/".concat(e.$route.params.id)),t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](0),e.$toast.error(t.t0.response.data.msg),setTimeout(e.$toast.clear,3e3);case 23:return t.prev=23,e.blocked=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[0,19,23,26]])})))()}})};c("7be1");g.render=h,g.__scopeId="data-v-7eb79e8d";var w=g,E={components:{Edit:w,Head:u["a"]},data:function(){return{collection:null}},computed:{buttons:function(){return[{to:"",class:"btn btn-lg btn-outline-primary",show:!0,text:"Вернуться",handler:this.getBack}]}},methods:Object(b["a"])(Object(b["a"])({},Object(C["b"])(["GET_COLLECTION_ITEMS","GET_COLLECTION"])),{},{getBack:function(){this.$router.go(-1)}}),created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GET_COLLECTION(e.$route.params.id);case 2:e.collection=t.sent;case 3:case"end":return t.stop()}}),t)})))()}};E.render=d;t["default"]=E},f51f:function(e,t,c){}}]);
//# sourceMappingURL=chunk-65be4cf8.c2751f8c.js.map