(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b5ae2b4"],{"12a2":function(e,t,n){},2048:function(e,t,n){"use strict";n.r(t);var c=n("7a23");Object(c["A"])("data-v-71128718");var r={class:"text mb-2"},o={class:"badge bg-info text-dark ms-1"},i={key:0},a=Object(c["i"])("hr",null,null,-1),l={class:"text-center mb-5"},s={class:"d-flex justify-content-center p-2"},u=Object(c["i"])("hr",null,null,-1),d={class:"text-center mb-4"},b={key:1,class:"text-center fs-5"},p={key:2},m=["placeholder"],O=Object(c["i"])("br",null,null,-1),h=Object(c["i"])("br",null,null,-1),j={key:1,class:"text-center fs-5"};function f(e,t,n,f,v,x){var C=Object(c["G"])("CreateCollection"),g=Object(c["G"])("Collections");return Object(c["x"])(),Object(c["h"])("div",null,[Object(c["i"])("h3",r,[Object(c["j"])(Object(c["J"])(x.namePage)+" ",1),Object(c["i"])("span",o,Object(c["J"])(x.ownerUserRight),1)]),x.readOnly?Object(c["g"])("",!0):(Object(c["x"])(),Object(c["h"])("div",i,[a,Object(c["i"])("h3",l,[Object(c["i"])("strong",null,Object(c["J"])(e.$t("view.page.title-2")),1),Object(c["i"])("div",s,[Object(c["k"])(C,{id:e.$route.params.id,onUpdateCollections:x.updateCollections},null,8,["id","onUpdateCollections"])])])])),u,Object(c["i"])("h3",d,Object(c["J"])(e.$t("view.page.title-3")),1),0==v.ownerCollections.length?(Object(c["x"])(),Object(c["h"])("p",b,Object(c["J"])(e.$t("view.page.text-1")),1)):(Object(c["x"])(),Object(c["h"])("div",p,[Object(c["U"])(Object(c["i"])("input",{class:"form-control p-1 rounded",type:"text",placeholder:e.$t("view.page.searchPlaceholder"),"onUpdate:modelValue":t[0]||(t[0]=function(e){return v.searchValue=e})},null,8,m),[[c["P"],v.searchValue,void 0,{trim:!0}]]),O,h,x.collections.length>0?(Object(c["x"])(),Object(c["f"])(g,{key:0,collections:x.collections,readOnly:x.readOnly,onDeleteCollection:x.deleteCollection},null,8,["collections","readOnly","onDeleteCollection"])):(Object(c["x"])(),Object(c["h"])("p",j,Object(c["J"])(e.$t("view.page.text-2")),1))]))])}Object(c["y"])();var v=n("5530"),x=n("1da1"),C=(n("b0c0"),n("99af"),n("4de4"),n("caad"),n("2532"),n("498a"),n("96cf"),n("fb43"));n("a4d3"),n("e01a");Object(c["A"])("data-v-a62504e2");var g={class:"card-body"},w={class:"form-outline border rounded-3 mb-2 "},E={class:"form-outline border rounded-3 mb-2 "},y={class:"form-outline border rounded-3 mb-2"},k=["disabled"];function T(e,t,n,r,o,i){var a=Object(c["G"])("DropZone"),l=Object(c["G"])("Multiselect");return Object(c["x"])(),Object(c["h"])("div",{class:Object(c["r"])("card w-100 shadow-sm bg-".concat(e.theme," text-").concat(e.themeText))},[Object(c["i"])("div",g,[Object(c["i"])("form",{onSubmit:t[3]||(t[3]=Object(c["V"])((function(){return i.createCollection&&i.createCollection.apply(i,arguments)}),["prevent"]))},[Object(c["i"])("div",w,[Object(c["k"])(a,{id:n.id},null,8,["id"])]),Object(c["i"])("div",E,[Object(c["U"])(Object(c["i"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.collection.name=e}),type:"text",id:"form8Example1",class:"form-control"},null,512),[[c["P"],o.collection.name]]),Object(c["i"])("label",{for:"form8Example1",class:Object(c["r"])("form-label fs-6 text-".concat(e.themeText))},Object(c["J"])(e.$t("component.collection.create.name")),3)]),Object(c["k"])(l,{modelValue:o.collection.topic,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.collection.topic=e}),placeholder:e.$t("component.collection.create.searchPlaceholder"),label:"name",trackBy:"name",options:e.topics,searchable:!0,class:"mb-2 text-black"},{option:Object(c["T"])((function(e){var t=e.option;return[Object(c["j"])(Object(c["J"])(t.name),1)]})),_:1},8,["modelValue","placeholder","options"]),Object(c["i"])("div",y,[Object(c["U"])(Object(c["i"])("textarea",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.collection.description=e}),class:"form-control",id:"form4Example3",rows:"4"},null,512),[[c["P"],o.collection.description]]),Object(c["i"])("label",{class:Object(c["r"])("form-label fs-6 text-".concat(e.themeText)),for:"form4Example3"},Object(c["J"])(e.$t("component.collection.create.description")),3)]),Object(c["i"])("button",{type:"submit",class:"w-100 btn btn-lg btn-primary",disabled:i.disabled},Object(c["J"])(e.$t("component.collection.create.button")),9,k)],32)])],2)}Object(c["y"])();n("a9e3"),n("7db0");var L=n("e583"),$=n("a306"),_=n("5502"),R={components:{DropZone:L["a"],Multiselect:$["a"]},props:{id:{type:Number,required:!0}},data:function(){return{blocked:!1,collection:{name:"",topic:"",description:"",image:""}}},computed:Object(v["a"])(Object(v["a"])({},Object(_["c"])(["topics","theme","themeText","uppy","isAdmin"])),{},{topicId:function(){var e,t=this;return(null===(e=this.topics.find((function(e){return e.name===t.collection.topic})))||void 0===e?void 0:e.id)||-1},disabled:function(){return-1==this.topicId||this.blocked}}),methods:Object(v["a"])(Object(v["a"])({},Object(_["b"])(["CREATE_MY_COLLECTION","CREATE_COLLECTION"])),{},{clearForm:function(){this.collection.image="",this.collection.name="",this.collection.description="",this.collection.topic="",this.uppy.reset()},createMyCollection:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.CREATE_MY_COLLECTION({name:e.collection.name,description:e.collection.description,id_topic:e.topicId,image:e.collection.image});case 2:case"end":return t.stop()}}),t)})))()},createCollectionById:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.CREATE_COLLECTION({id:e.id,name:e.collection.name,description:e.collection.description,id_topic:e.topicId,image:e.collection.image});case 2:case"end":return t.stop()}}),t)})))()},createCollection:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.blocked=!0,t.next=4,e.uppy.upload();case 4:if(e.collection.image=t.sent,e.collection.image=e.collection.image.successful[0].response.body.msg.name,!e.isAdmin){t.next=11;break}return t.next=9,e.createCollectionById();case 9:t.next=13;break;case 11:return t.next=13,e.createMyCollection();case 13:e.$emit("updateCollections"),e.$toast.success("Коллекция успешно создана!"),setTimeout(e.$toast.clear,3e3),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](0),e.$toast.error(t.t0),setTimeout(e.$toast.clear,3e3);case 22:return t.prev=22,e.blocked=!1,e.clearForm(),t.finish(22);case 26:case"end":return t.stop()}}),t,null,[[0,18,22,26]])})))()}})};n("8ca8");R.render=T,R.__scopeId="data-v-a62504e2";var I=R,U={components:{Collections:C["a"],CreateCollection:I},data:function(){return{searchValue:"",owner:{},ownerCollections:[]}},created:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.GET_USER(e.$route.params.id);case 3:return e.owner=t.sent,e.owner||e.$router.push("/page404"),t.next=7,e.updateCollections();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$router.push("/page404");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},computed:Object(v["a"])(Object(v["a"])({},Object(_["c"])(["user","adminRights","isAdmin"])),{},{ownerUserRight:function(){var e,t;return null===(e=this.owner)||void 0===e||null===(t=e.right)||void 0===t?void 0:t.name},isMyPage:function(){return this.user.id==this.$route.params.id},namePage:function(){return this.isMyPage?"".concat(this.user.name," (").concat(this.$t("view.page.title-1"),")"):"".concat(this.owner.name)},readOnly:function(){return!(this.user.id&&(this.isMyPage||this.isAdmin))},collections:function(){var e=this;return this.ownerCollections.filter((function(t){return t.name.trim().toLowerCase().includes(e.searchValue.toLowerCase())}))}}),methods:Object(v["a"])(Object(v["a"])({},Object(_["b"])(["GET_USER","GET_USER_COLLECTIONS","DELETE_COLLECTION","DELETE_MY_COLLECTION"])),{},{deleteCollection:function(e){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,!t.isAdmin){n.next=6;break}return n.next=4,t.DELETE_COLLECTION({id:e});case 4:n.next=8;break;case 6:return n.next=8,t.DELETE_MY_COLLECTION({id:e});case 8:t.updateCollections(),t.$toast.success(t.$t("view.page.successDelete")),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](0),t.$toast.error(n.t0.response.data.msg);case 15:return n.prev=15,setTimeout(t.$toast.clear,3e3),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,12,15,18]])})))()},updateCollections:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GET_USER_COLLECTIONS(e.$route.params.id);case 2:e.ownerCollections=t.sent;case 3:case"end":return t.stop()}}),t)})))()}})};n("6041");U.render=f,U.__scopeId="data-v-71128718";t["default"]=U},"498a":function(e,t,n){"use strict";var c=n("23e7"),r=n("58a8").trim,o=n("c8d2");c({target:"String",proto:!0,forced:o("trim")},{trim:function(){return r(this)}})},6041:function(e,t,n){"use strict";n("d507")},"8ca8":function(e,t,n){"use strict";n("12a2")},c8d2:function(e,t,n){var c=n("d039"),r=n("5899"),o="​᠎";e.exports=function(e){return c((function(){return!!r[e]()||o[e]()!=o||r[e].name!==e}))}},d507:function(e,t,n){}}]);
//# sourceMappingURL=chunk-1b5ae2b4.92ea0ec5.js.map