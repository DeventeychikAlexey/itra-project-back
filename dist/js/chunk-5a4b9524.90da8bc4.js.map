{"version":3,"sources":["webpack:///./src/components/collection/CollectionHead.vue?60e4","webpack:///./src/components/collection/CollectionHead.vue","webpack:///./src/components/collection/CollectionHead.vue?ca7d","webpack:///./src/components/collection/change/Edit.vue?bdb6","webpack:///./src/views/CollectionEdit.vue","webpack:///./src/components/collection/change/Edit.vue","webpack:///./src/components/collection/change/Edit.vue?9cc0","webpack:///./src/views/CollectionEdit.vue?cdd9"],"names":["class","getValidName","collection","topic","name","$t","date","description","buttons","id","idCollection","props","type","Object","required","Array","components","Image","Buttons","computed","moment","this","createdAt","locale","lang","fromNow","render","__scopeId","theme","themeText","editCollection","editedCollection","for","placeholder","label","trackBy","options","topics","searchable","option","rows","disabled","DropZone","Multiselect","Number","data","blocked","topicId","find","el","methods","editMyCollection","EDIT_MY_COLLECTION","id_topic","image","editCollectionById","EDIT_COLLECTION","keys","uppy","store","state","files","length","upload","successful","response","body","msg","DELETE_IMAGE","isAdmin","$router","push","$route","params","$toast","error","setTimeout","clear","Edit","Head","to","show","text","handler","getBack","isMyPage","user","id_user","restricted","go","created","GET_COLLECTION"],"mappings":"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","file":"js/chunk-5a4b9524.90da8bc4.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CollectionHead.vue?vue&type=style&index=0&id=f52517de&scoped=true&lang=css\"","<template>\r\n  <div>\r\n    <div\r\n      :class=\"\r\n        `card bg-${theme} text-${textTheme} flex-md-nowrap flex-wrap-reverse flex-row flex-1-1 mb-4 box-shadow`\r\n      \"\r\n    >\r\n      <div class=\"card-body d-flex flex-column align-items-start\">\r\n        <h3 class=\"card-title mb-0\">\r\n          {{ getValidName }}\r\n        </h3>\r\n        <div class=\"mb-1\">\r\n          {{ collection.topic.name }}\r\n        </div>\r\n        <div class=\"mb-2 \">\r\n          <strong class=\"me-1\">{{\r\n            $t(\"component.collection.collection-head.title-1\")\r\n          }}</strong\r\n          >{{ date }}\r\n        </div>\r\n        <p class=\"card-text mb-auto\">\r\n          {{ collection.description }}\r\n        </p>\r\n        <Buttons class=\"flex-md-nowrap mt-3\" :buttons=\"buttons\" />\r\n      </div>\r\n      <div class=\"card-img-right image-wrapper\">\r\n        <Image v-if=\"collection.id\" :idCollection=\"collection.id\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Image from \"@/components/collection/Image.vue\";\r\nimport Buttons from \"@/components/button/Buttons.vue\";\r\n\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  props: {\r\n    collection: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    buttons: {\r\n      type: Array\r\n    }\r\n  },\r\n  components: { Image, Buttons },\r\n  computed: {\r\n    ...mapGetters([\"lang\", \"theme\", \"themeText\"]),\r\n    date() {\r\n      return moment(this.collection.createdAt)\r\n        .locale(this.lang)\r\n        .fromNow();\r\n    },\r\n    getValidName() {\r\n      return (\r\n        this.collection.name ||\r\n        this.$t(\"component.collection.collection-head.title-2\")\r\n      );\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.image-wrapper {\r\n  max-height: 300px;\r\n  max-width: 520px;\r\n}\r\n</style>\r\n","import { render } from \"./CollectionHead.vue?vue&type=template&id=f52517de&scoped=true\"\nimport script from \"./CollectionHead.vue?vue&type=script&lang=js\"\nexport * from \"./CollectionHead.vue?vue&type=script&lang=js\"\n\nimport \"./CollectionHead.vue?vue&type=style&index=0&id=f52517de&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-f52517de\"\n\nexport default script","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Edit.vue?vue&type=style&index=0&id=16cb1960&land=scss&scoped=true&lang=css\"","<template>\r\n  <div>\r\n    <div class=\"mb-2\">\r\n      <Head :collection=\"collection\" :buttons=\"buttons\" />\r\n    </div>\r\n    <div>\r\n      <hr />\r\n      <h3 class=\"text-center mb-5\">\r\n        <strong> {{ $t(\"view.collection-edit.title-1\") }}</strong>\r\n        <div class=\"d-flex justify-content-center p-2\">\r\n          <Edit :collection=\"collection\" />\r\n        </div>\r\n      </h3>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Head from \"@/components/collection/CollectionHead.vue\";\r\nimport Edit from \"@/components/collection/change/Edit.vue\";\r\n\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nexport default {\r\n  components: { Edit, Head },\r\n  data() {\r\n    return {\r\n      collection: null\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"user\", \"isAdmin\"]),\r\n    buttons() {\r\n      return [\r\n        {\r\n          to: ``,\r\n          class: \"btn btn-lg btn-outline-primary\",\r\n          show: true,\r\n          text: this.$t(\"view.collection-edit.buttons.title-1\"),\r\n          handler: this.getBack\r\n        }\r\n      ];\r\n    },\r\n    isMyPage() {\r\n      return this.user?.id == this.collection?.id_user;\r\n    },\r\n    restricted() {\r\n      return !(!!this.user.id && (this.isMyPage || this.isAdmin));\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\"GET_COLLECTION\"]),\r\n    getBack() {\r\n      this.$router.go(-1);\r\n    }\r\n  },\r\n  async created() {\r\n    this.collection = await this.GET_COLLECTION(this.$route.params.id);\r\n    if (!this.collection || this.restricted) this.$router.push(\"/page404\");\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n","<template>\r\n  <div :class=\"`card w-100 shadow-sm bg-${theme} text-${themeText}`\">\r\n    <div class=\"card-body\">\r\n      <form @submit.prevent=\"editCollection\">\r\n        <div class=\"form-outline border rounded-3 mb-2 \">\r\n          <DropZone :id=\"id\" />\r\n        </div>\r\n        <div class=\"form-outline border rounded-3 mb-2\">\r\n          <input\r\n            v-model=\"editedCollection.name\"\r\n            type=\"text\"\r\n            id=\"form8Example1\"\r\n            :class=\"\r\n              `form-control ${editedCollection.name &&\r\n                'active'} text-${themeText}`\r\n            \"\r\n          />\r\n          <label\r\n            for=\"form8Example1\"\r\n            :class=\"`form-label fs-6 text-${themeText}`\"\r\n          >\r\n            {{ $t(\"component.collection.change.edit.name\") }}\r\n          </label>\r\n        </div>\r\n        <Multiselect\r\n          v-model=\"editedCollection.topic.name\"\r\n          :placeholder=\"$t('component.collection.change.edit.search-1')\"\r\n          label=\"name\"\r\n          trackBy=\"name\"\r\n          :options=\"topics\"\r\n          :searchable=\"true\"\r\n          class=\"mb-2 text-black\"\r\n        >\r\n          <template v-slot:option=\"{ option }\">\r\n            {{ option.name }}\r\n          </template>\r\n        </Multiselect>\r\n\r\n        <div class=\"form-outline border rounded-3 mb-2\">\r\n          <textarea\r\n            v-model=\"editedCollection.description\"\r\n            :class=\"\r\n              `form-control ${editedCollection.description &&\r\n                'active'} text-${themeText}`\r\n            \"\r\n            id=\"form4Example3\"\r\n            rows=\"4\"\r\n          ></textarea>\r\n          <label\r\n            :class=\"`form-label fs-6 text-${themeText}`\"\r\n            for=\"form4Example3\"\r\n            >{{ $t(\"component.collection.change.edit.description\") }}</label\r\n          >\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          class=\"w-100 btn btn-lg btn-secondary\"\r\n          :disabled=\"disabled\"\r\n        >\r\n          {{ $t(\"component.collection.change.edit.button\") }}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DropZone from \"@/components/dropZone/DropZone.vue\";\r\nimport Multiselect from \"@vueform/multiselect\";\r\n\r\nimport { mapActions, mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  components: { DropZone, Multiselect },\r\n  props: {\r\n    id: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    collection: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      blocked: false,\r\n      editedCollection: { ...this.collection }\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"topics\", \"theme\", \"themeText\", \"uppy\", \"isAdmin\"]),\r\n    topicId() {\r\n      return (\r\n        this.topics.find(el => el.name === this.editedCollection.topic.name)\r\n          ?.id || -1\r\n      );\r\n    },\r\n    disabled() {\r\n      return this.topicId == -1 || this.blocked;\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\"EDIT_MY_COLLECTION\", \"EDIT_COLLECTION\", \"DELETE_IMAGE\"]),\r\n    async editMyCollection() {\r\n      await this.EDIT_MY_COLLECTION({\r\n        id: this.editedCollection.id,\r\n        name: this.editedCollection.name,\r\n        description: this.editedCollection.description,\r\n        id_topic: this.topicId,\r\n        image: this.editedCollection.image\r\n      });\r\n    },\r\n    async editCollectionById() {\r\n      await this.EDIT_COLLECTION({\r\n        id: this.editedCollection.id,\r\n        name: this.editedCollection.name,\r\n        description: this.editedCollection.description,\r\n        id_topic: this.topicId,\r\n        image: this.editedCollection.image\r\n      });\r\n    },\r\n    async editCollection() {\r\n      try {\r\n        this.blocked = true;\r\n        if (Object.keys(this.uppy.store.state.files).length > 0) {\r\n          this.editedCollection.image = await this.uppy.upload();\r\n          this.editedCollection.image = this.editedCollection.image.successful[0].response.body.msg.name;\r\n          await this.DELETE_IMAGE(this.editedCollection.id);\r\n        }\r\n        if (this.isAdmin) await this.editCollectionById();\r\n        else await this.editMyCollection();\r\n        this.$router.push(`/collection/${this.$route.params.id}`);\r\n      } catch (error) {\r\n        this.$toast.error(\r\n          error.response.data?.msg ||\r\n            this.$t(\"component.collection.change.edit.error\")\r\n        );\r\n        setTimeout(this.$toast.clear, 3000);\r\n      } finally {\r\n        this.blocked = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style land=\"scss\" scoped>\r\nimg {\r\n  width: 100%;\r\n  height: 225px;\r\n  object-fit: contain;\r\n}\r\nlabel {\r\n  font-size: 12px;\r\n}\r\n</style>\r\n","import { render } from \"./Edit.vue?vue&type=template&id=16cb1960&scoped=true\"\nimport script from \"./Edit.vue?vue&type=script&lang=js\"\nexport * from \"./Edit.vue?vue&type=script&lang=js\"\n\nimport \"./Edit.vue?vue&type=style&index=0&id=16cb1960&land=scss&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-16cb1960\"\n\nexport default script","import { render } from \"./CollectionEdit.vue?vue&type=template&id=0361662c\"\nimport script from \"./CollectionEdit.vue?vue&type=script&lang=js\"\nexport * from \"./CollectionEdit.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}