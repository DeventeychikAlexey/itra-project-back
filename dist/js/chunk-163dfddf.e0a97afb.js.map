{"version":3,"sources":["webpack:///./src/views/Page.vue?be82","webpack:///./src/views/Page.vue","webpack:///./src/components/collection/change/Create.vue","webpack:///./src/components/collection/change/Create.vue?76db","webpack:///./src/views/Page.vue?36c8","webpack:///./src/components/collection/change/Create.vue?74d9"],"names":["class","namePage","ownerUserRight","readOnly","$t","id","$route","params","updateCollections","ownerCollections","length","type","placeholder","searchValue","collections","theme","themeText","createCollection","collection","name","for","topic","label","trackBy","options","topics","searchable","option","description","rows","disabled","components","DropZone","Multiselect","props","Number","required","data","blocked","image","computed","topicId","this","find","el","methods","clearForm","uppy","reset","createMyCollection","CREATE_MY_COLLECTION","id_topic","createCollectionById","CREATE_COLLECTION","upload","successful","response","body","msg","isAdmin","$emit","$toast","success","error","respone","setTimeout","clear","render","__scopeId","Collections","CreateCollection","Create","owner","created","GET_USER","$router","push","right","isMyPage","user","filter","trim","toLowerCase","includes","GET_USER_COLLECTIONS","i","COUNT_COLLECTION_ITEMS","countItems"],"mappings":"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","file":"js/chunk-163dfddf.e0a97afb.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Page.vue?vue&type=style&index=0&id=26eeab58&scoped=true&lang=css\"","<template>\r\n  <div>\r\n    <h3 class=\"text mb-2\">\r\n      {{ namePage }}\r\n      <span class=\"badge bg-info text-dark ms-1\">{{ ownerUserRight }}</span>\r\n    </h3>\r\n    <div v-if=\"!readOnly\">\r\n      <hr />\r\n      <h3 class=\"text-center mb-5\">\r\n        <strong> {{ $t(\"view.page.title-2\") }}</strong>\r\n        <div class=\"d-flex justify-content-center p-2\">\r\n          <CreateCollection\r\n            :id=\"$route.params.id\"\r\n            @updateCollections=\"updateCollections\"\r\n          />\r\n        </div>\r\n      </h3>\r\n    </div>\r\n    <hr />\r\n    <h3 class=\"text-center mb-4\">\r\n      {{ $t(\"view.page.title-3\") }}\r\n    </h3>\r\n    <p v-if=\"ownerCollections.length == 0\" class=\"text-center fs-5\">\r\n      {{ $t(\"view.page.text-1\") }}\r\n    </p>\r\n    <div v-else>\r\n      <input\r\n        class=\"form-control p-1 rounded\"\r\n        type=\"text\"\r\n        :placeholder=\"$t('view.page.search-1')\"\r\n        v-model.trim=\"searchValue\"\r\n      />\r\n      <br />\r\n      <br />\r\n      <Collections\r\n        v-if=\"collections.length > 0\"\r\n        :collections=\"collections\"\r\n        :readOnly=\"readOnly\"\r\n        @updateCollections=\"updateCollections\"\r\n      />\r\n      <p v-else class=\"text-center fs-5\">\r\n        {{ $t(\"view.page.text-2\") }}\r\n      </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Collections from \"@/components/collection/Collections.vue\";\r\nimport CreateCollection from \"@/components/collection/change/Create.vue\";\r\n\r\nimport { mapGetters, mapActions } from \"vuex\";\r\n\r\nexport default {\r\n  components: { Collections, CreateCollection },\r\n  data() {\r\n    return {\r\n      searchValue: \"\",\r\n      owner: {},\r\n      ownerCollections: []\r\n    };\r\n  },\r\n  async created() {\r\n    try {\r\n      this.owner = await this.GET_USER(this.$route.params.id);\r\n      if (!this.owner) this.$router.push(\"/page404\");\r\n      await this.updateCollections();\r\n    } catch (error) {\r\n      this.$router.push(\"/page404\");\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"user\", \"adminRights\", \"isAdmin\"]),\r\n    ownerUserRight() {\r\n      return this.owner?.right?.name;\r\n    },\r\n    isMyPage() {\r\n      return this.user.id == this.$route.params.id;\r\n    },\r\n    namePage() {\r\n      return this.isMyPage\r\n        ? `${this.user.name} (${this.$t(\"view.page.title-1\")})`\r\n        : `${this.owner.name}`;\r\n    },\r\n    readOnly() {\r\n      return !(!!this.user.id && (this.isMyPage || this.isAdmin));\r\n    },\r\n    collections() {\r\n      return this.ownerCollections.filter(collection =>\r\n        collection.name\r\n          .trim()\r\n          .toLowerCase()\r\n          .includes(this.searchValue.toLowerCase())\r\n      );\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      \"GET_USER\",\r\n      \"GET_USER_COLLECTIONS\",\r\n      \"COUNT_COLLECTION_ITEMS\"\r\n    ]),\r\n    async updateCollections() {\r\n      this.ownerCollections = await this.GET_USER_COLLECTIONS(\r\n        this.$route.params.id\r\n      );\r\n      for (let i = 0; i < this.ownerCollections.length; i++) {\r\n        this.ownerCollections[i].countItems = await this.COUNT_COLLECTION_ITEMS(\r\n          this.ownerCollections[i].id\r\n        );\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ninput {\r\n  width: 100%;\r\n}\r\n</style>\r\n","<template>\r\n  <div :class=\"`card w-100 shadow-sm bg-${theme} text-${themeText}`\">\r\n    <div class=\"card-body\">\r\n      <form @submit.prevent=\"createCollection\">\r\n        <div class=\"form-outline border rounded-3 mb-2 \">\r\n          <DropZone :id=\"id\" />\r\n        </div>\r\n        <div class=\"form-outline border rounded-3 mb-2 \">\r\n          <input\r\n            v-model=\"collection.name\"\r\n            type=\"text\"\r\n            id=\"form8Example1\"\r\n            :class=\"`form-control text-${themeText}`\"\r\n          />\r\n          <label\r\n            for=\"form8Example1\"\r\n            :class=\"`form-label fs-6 text-${themeText}`\"\r\n            >{{ $t(\"component.collection.change.create.name\") }}</label\r\n          >\r\n        </div>\r\n\r\n        <Multiselect\r\n          v-model=\"collection.topic\"\r\n          :placeholder=\"$t('component.collection.change.create.search-1')\"\r\n          label=\"name\"\r\n          trackBy=\"name\"\r\n          :options=\"topics\"\r\n          :searchable=\"true\"\r\n          class=\"mb-2 text-black\"\r\n        >\r\n          <template v-slot:option=\"{ option }\">\r\n            {{ option.name }}\r\n          </template>\r\n        </Multiselect>\r\n\r\n        <div class=\"form-outline border rounded-3 mb-2\">\r\n          <textarea\r\n            v-model=\"collection.description\"\r\n            :class=\"`form-control text-${themeText}`\"\r\n            id=\"form4Example3\"\r\n            rows=\"4\"\r\n          ></textarea>\r\n          <label\r\n            :class=\"`form-label fs-6 text-${themeText}`\"\r\n            for=\"form4Example3\"\r\n          >\r\n            {{ $t(\"component.collection.change.create.description\") }}\r\n          </label>\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          class=\"w-100 btn btn-lg btn-primary\"\r\n          :disabled=\"disabled\"\r\n        >\r\n          {{ $t(\"component.collection.change.create.button\") }}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DropZone from \"@/components/dropZone/DropZone.vue\";\r\nimport Multiselect from \"@vueform/multiselect\";\r\n\r\nimport { mapActions, mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  components: { DropZone, Multiselect },\r\n  props: {\r\n    id: {\r\n      type: Number,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      blocked: false,\r\n      collection: {\r\n        name: \"\",\r\n        topic: \"\",\r\n        description: \"\",\r\n        image: \"\"\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"topics\", \"theme\", \"themeText\", \"uppy\", \"isAdmin\"]),\r\n    topicId() {\r\n      return (\r\n        this.topics.find(el => el.name === this.collection.topic)?.id || -1\r\n      );\r\n    },\r\n    disabled() {\r\n      return this.topicId == -1 || this.blocked;\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\"CREATE_MY_COLLECTION\", \"CREATE_COLLECTION\"]),\r\n    clearForm() {\r\n      this.collection.image = \"\";\r\n      this.collection.name = \"\";\r\n      this.collection.description = \"\";\r\n      this.collection.topic = \"\";\r\n      this.uppy.reset();\r\n    },\r\n    async createMyCollection() {\r\n      await this.CREATE_MY_COLLECTION({\r\n        name: this.collection.name,\r\n        description: this.collection.description,\r\n        id_topic: this.topicId,\r\n        image: this.collection.image\r\n      });\r\n    },\r\n    async createCollectionById() {\r\n      await this.CREATE_COLLECTION({\r\n        id: this.id,\r\n        name: this.collection.name,\r\n        description: this.collection.description,\r\n        id_topic: this.topicId,\r\n        image: this.collection.image\r\n      });\r\n    },\r\n    async createCollection() {\r\n      try {\r\n        this.blocked = true;\r\n        this.collection.image = await this.uppy.upload();\r\n        this.collection.image = this.collection.image.successful[0].response.body.msg.name;\r\n        if (this.isAdmin) await this.createCollectionById();\r\n        else await this.createMyCollection();\r\n        this.$emit(\"updateCollections\");\r\n        this.$toast.success(\r\n          this.$t(\"component.collection.change.create.success-1\")\r\n        );\r\n        this.clearForm();\r\n      } catch (error) {\r\n        this.$toast.error(\r\n          error.respone?.data?.msg ||\r\n            this.$t(\"component.collection.change.create.error\")\r\n        );\r\n      } finally {\r\n        this.blocked = false;\r\n        setTimeout(this.$toast.clear, 3000);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style land=\"scss\" scoped>\r\nimg {\r\n  width: 100%;\r\n  height: 225px;\r\n  object-fit: contain;\r\n}\r\nlabel {\r\n  font-size: 12px;\r\n}\r\n</style>\r\n","import { render } from \"./Create.vue?vue&type=template&id=bed8c2da&scoped=true\"\nimport script from \"./Create.vue?vue&type=script&lang=js\"\nexport * from \"./Create.vue?vue&type=script&lang=js\"\n\nimport \"./Create.vue?vue&type=style&index=0&id=bed8c2da&land=scss&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-bed8c2da\"\n\nexport default script","import { render } from \"./Page.vue?vue&type=template&id=26eeab58&scoped=true\"\nimport script from \"./Page.vue?vue&type=script&lang=js\"\nexport * from \"./Page.vue?vue&type=script&lang=js\"\n\nimport \"./Page.vue?vue&type=style&index=0&id=26eeab58&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-26eeab58\"\n\nexport default script","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Create.vue?vue&type=style&index=0&id=bed8c2da&land=scss&scoped=true&lang=css\""],"sourceRoot":""}