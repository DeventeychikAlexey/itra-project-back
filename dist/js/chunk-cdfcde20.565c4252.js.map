{"version":3,"sources":["webpack:///./src/components/collection/CollectionHead.vue","webpack:///./src/components/collection/CollectionHead.vue?ca7d","webpack:///./src/views/CollectionEdit.vue","webpack:///./src/components/collection/change/Edit.vue","webpack:///./src/components/collection/change/Edit.vue?9cc0","webpack:///./src/views/CollectionEdit.vue?cdd9","webpack:///./src/components/collection/CollectionHead.vue?7444","webpack:///./src/components/collection/change/Edit.vue?31cc"],"names":["class","getValidName","collection","topic","name","$t","date","description","buttons","id","idCollection","props","type","Object","required","Array","components","Image","Buttons","computed","moment","this","createdAt","locale","lang","fromNow","render","__scopeId","theme","themeText","editCollection","editedCollection","for","placeholder","label","trackBy","options","topics","searchable","option","rows","disabled","DropZone","Multiselect","Number","data","blocked","topicId","find","el","watch","value","methods","editMyCollection","EDIT_MY_COLLECTION","id_topic","image","editCollectionById","EDIT_COLLECTION","keys","uppy","store","state","files","length","upload","successful","response","body","msg","DELETE_IMAGE","isAdmin","$router","push","$route","params","$toast","error","setTimeout","clear","Edit","Head","to","show","text","handler","getBack","isMyPage","user","id_user","restricted","go","created","GET_COLLECTION"],"mappings":"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","file":"js/chunk-cdfcde20.565c4252.js","sourcesContent":["<template>\r\n  <div>\r\n    <div\r\n      :class=\"\r\n        `card bg-${theme} text-${textTheme} flex-md-nowrap flex-wrap-reverse flex-row flex-1-1 mb-4 box-shadow`\r\n      \"\r\n    >\r\n      <div class=\"card-body d-flex flex-column align-items-start\">\r\n        <h3 class=\"card-title mb-0\">\r\n          {{ getValidName }}\r\n        </h3>\r\n        <div class=\"mb-1\">\r\n          {{ collection?.topic?.name }}\r\n        </div>\r\n        <div class=\"mb-2 \">\r\n          <strong class=\"me-1\">{{\r\n            $t(\"component.collection.collection-head.title-1\")\r\n          }}</strong\r\n          >{{ date }}\r\n        </div>\r\n        <p class=\"card-text mb-auto\">\r\n          {{ collection?.description }}\r\n        </p>\r\n        <Buttons class=\"flex-md-nowrap mt-3\" :buttons=\"buttons\" />\r\n      </div>\r\n      <div class=\"card-img-right image-wrapper\">\r\n        <Image v-if=\"collection?.id\" :idCollection=\"collection?.id\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Image from \"@/components/collection/Image.vue\";\r\nimport Buttons from \"@/components/button/Buttons.vue\";\r\n\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  props: {\r\n    collection: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    buttons: {\r\n      type: Array\r\n    }\r\n  },\r\n  components: { Image, Buttons },\r\n  computed: {\r\n    ...mapGetters([\"lang\", \"theme\", \"themeText\"]),\r\n    date() {\r\n      return moment(this.collection?.createdAt)\r\n        .locale(this.lang)\r\n        .fromNow();\r\n    },\r\n    getValidName() {\r\n      return (\r\n        this.collection?.name ||\r\n        this.$t(\"component.collection.collection-head.title-2\")\r\n      );\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.image-wrapper {\r\n  max-height: 300px;\r\n  max-width: 520px;\r\n}\r\n</style>\r\n","import { render } from \"./CollectionHead.vue?vue&type=template&id=0a77bc26&scoped=true\"\nimport script from \"./CollectionHead.vue?vue&type=script&lang=js\"\nexport * from \"./CollectionHead.vue?vue&type=script&lang=js\"\n\nimport \"./CollectionHead.vue?vue&type=style&index=0&id=0a77bc26&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-0a77bc26\"\n\nexport default script","<template>\r\n  <div>\r\n    <div class=\"mb-2\">\r\n      <Head :collection=\"collection\" :buttons=\"buttons\" />\r\n    </div>\r\n    <div>\r\n      <hr />\r\n      <h3 class=\"text-center mb-5\">\r\n        <strong> {{ $t(\"view.collection-edit.title-1\") }}</strong>\r\n        <div class=\"d-flex justify-content-center p-2\">\r\n          <Edit :collection=\"collection\" />\r\n        </div>\r\n      </h3>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Head from \"@/components/collection/CollectionHead.vue\";\r\nimport Edit from \"@/components/collection/change/Edit.vue\";\r\n\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nexport default {\r\n  components: { Edit, Head },\r\n  data() {\r\n    return {\r\n      collection: null\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"user\", \"isAdmin\"]),\r\n    buttons() {\r\n      return [\r\n        {\r\n          to: ``,\r\n          class: \"btn btn-lg btn-outline-primary\",\r\n          show: true,\r\n          text: this.$t(\"view.collection-edit.buttons.title-1\"),\r\n          handler: this.getBack\r\n        }\r\n      ];\r\n    },\r\n    isMyPage() {\r\n      return this.user?.id == this.collection?.id_user;\r\n    },\r\n    restricted() {\r\n      return !(!!this.user.id && (this.isMyPage || this.isAdmin));\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\"GET_COLLECTION\"]),\r\n    getBack() {\r\n      this.$router.go(-1);\r\n    }\r\n  },\r\n  async created() {\r\n    this.collection = await this.GET_COLLECTION(this.$route.params.id);\r\n    if (!this.collection || this.restricted) this.$router.push(\"/page404\");\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n","<template>\r\n  <div :class=\"`card w-100 shadow-sm bg-${theme} text-${themeText}`\">\r\n    <div class=\"card-body\">\r\n      <form @submit.prevent=\"editCollection\">\r\n        <div class=\"form-outline border rounded-3 mb-2 \">\r\n          <DropZone :id=\"id\" />\r\n        </div>\r\n        <div class=\"form-outline border rounded-3 mb-2\">\r\n          <input\r\n            v-model=\"editedCollection.name\"\r\n            type=\"text\"\r\n            id=\"form8Example1\"\r\n            :class=\"\r\n              `form-control ${editedCollection?.name &&\r\n                'active'} text-${themeText}`\r\n            \"\r\n          />\r\n          <label\r\n            for=\"form8Example1\"\r\n            :class=\"`form-label fs-6 text-${themeText}`\"\r\n          >\r\n            {{ $t(\"component.collection.change.edit.name\") }}\r\n          </label>\r\n        </div>\r\n        <Multiselect\r\n          v-if=\"editedCollection?.topic?.name\"\r\n          v-model=\"editedCollection.topic.name\"\r\n          :placeholder=\"$t('component.collection.change.edit.search-1')\"\r\n          label=\"name\"\r\n          trackBy=\"name\"\r\n          :options=\"topics\"\r\n          :searchable=\"true\"\r\n          class=\"mb-2 text-black\"\r\n        >\r\n          <template v-slot:option=\"{ option }\">\r\n            {{ option.name }}\r\n          </template>\r\n        </Multiselect>\r\n\r\n        <div class=\"form-outline border rounded-3 mb-2\">\r\n          <textarea\r\n            v-model=\"editedCollection.description\"\r\n            :class=\"\r\n              `form-control ${editedCollection?.description &&\r\n                'active'} text-${themeText}`\r\n            \"\r\n            id=\"form4Example3\"\r\n            rows=\"4\"\r\n          ></textarea>\r\n          <label\r\n            :class=\"`form-label fs-6 text-${themeText}`\"\r\n            for=\"form4Example3\"\r\n            >{{ $t(\"component.collection.change.edit.description\") }}</label\r\n          >\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          class=\"w-100 btn btn-lg btn-secondary\"\r\n          :disabled=\"disabled\"\r\n        >\r\n          {{ $t(\"component.collection.change.edit.button\") }}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DropZone from \"@/components/dropZone/DropZone.vue\";\r\nimport Multiselect from \"@vueform/multiselect\";\r\n\r\nimport { mapActions, mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  components: { DropZone, Multiselect },\r\n  props: {\r\n    id: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    collection: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      blocked: false,\r\n      editedCollection: { ...this.collection }\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"topics\", \"theme\", \"themeText\", \"uppy\", \"isAdmin\"]),\r\n    topicId() {\r\n      return (\r\n        this.topics.find(el => el.name === this.editedCollection?.topic?.name)\r\n          ?.id || -1\r\n      );\r\n    },\r\n    disabled() {\r\n      return this.topicId == -1 || this.blocked;\r\n    }\r\n  },\r\n  watch: {\r\n    collection(value) {\r\n      this.editedCollection = value;\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\"EDIT_MY_COLLECTION\", \"EDIT_COLLECTION\", \"DELETE_IMAGE\"]),\r\n    async editMyCollection() {\r\n      await this.EDIT_MY_COLLECTION({\r\n        id: this.editedCollection?.id,\r\n        name: this.editedCollection?.name,\r\n        description: this.editedCollection?.description,\r\n        id_topic: this.topicId,\r\n        image: this.editedCollection?.image\r\n      });\r\n    },\r\n    async editCollectionById() {\r\n      await this.EDIT_COLLECTION({\r\n        id: this.editedCollection?.id,\r\n        name: this.editedCollection?.name,\r\n        description: this.editedCollection?.description,\r\n        id_topic: this.topicId,\r\n        image: this.editedCollection?.image\r\n      });\r\n    },\r\n    async editCollection() {\r\n      try {\r\n        this.blocked = true;\r\n        if (Object.keys(this.uppy.store.state.files).length > 0) {\r\n          this.editedCollection.image = await this.uppy.upload();\r\n          this.editedCollection.image = this.editedCollection.image.successful[0].response.body.msg.name;\r\n          await this.DELETE_IMAGE(this.editedCollection.id);\r\n        }\r\n        if (this.isAdmin) await this.editCollectionById();\r\n        else await this.editMyCollection();\r\n        this.$router.push(`/collection/${this.$route.params.id}`);\r\n      } catch (error) {\r\n        this.$toast.error(\r\n          error.response.data?.msg ||\r\n            this.$t(\"component.collection.change.edit.error\")\r\n        );\r\n        setTimeout(this.$toast.clear, 3000);\r\n      } finally {\r\n        this.blocked = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style land=\"scss\" scoped>\r\nimg {\r\n  width: 100%;\r\n  height: 225px;\r\n  object-fit: contain;\r\n}\r\nlabel {\r\n  font-size: 12px;\r\n}\r\n</style>\r\n","import { render } from \"./Edit.vue?vue&type=template&id=51bf0bb7&scoped=true\"\nimport script from \"./Edit.vue?vue&type=script&lang=js\"\nexport * from \"./Edit.vue?vue&type=script&lang=js\"\n\nimport \"./Edit.vue?vue&type=style&index=0&id=51bf0bb7&land=scss&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-51bf0bb7\"\n\nexport default script","import { render } from \"./CollectionEdit.vue?vue&type=template&id=0361662c\"\nimport script from \"./CollectionEdit.vue?vue&type=script&lang=js\"\nexport * from \"./CollectionEdit.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CollectionHead.vue?vue&type=style&index=0&id=0a77bc26&scoped=true&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Edit.vue?vue&type=style&index=0&id=51bf0bb7&land=scss&scoped=true&lang=css\""],"sourceRoot":""}