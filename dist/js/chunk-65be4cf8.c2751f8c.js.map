{"version":3,"sources":["webpack:///./src/components/collection/CollectionHead.vue","webpack:///./src/components/collection/CollectionHead.vue?ca7d","webpack:///./src/components/collection/change/Edit.vue?3a3a","webpack:///./src/components/collection/CollectionHead.vue?e724","webpack:///./src/views/CollectionEdit.vue","webpack:///./src/components/collection/change/Edit.vue","webpack:///./src/components/collection/change/Edit.vue?9cc0","webpack:///./src/views/CollectionEdit.vue?cdd9"],"names":["class","getValidName","collection","topic","name","date","description","buttons","idCollection","id","props","type","Object","required","Array","components","Image","Buttons","computed","moment","this","createdAt","locale","lang","fromNow","render","__scopeId","theme","themeText","editCollection","editedCollection","for","$t","placeholder","label","trackBy","options","topics","searchable","option","rows","disabled","DropZone","Multiselect","Number","data","blocked","topicId","find","el","methods","editMyCollection","EDIT_MY_COLLECTION","id_topic","image","editCollectionById","EDIT_COLLECTION","keys","uppy","store","state","files","length","upload","successful","response","body","msg","DELETE_IMAGE","isAdmin","$router","push","$route","params","$toast","error","setTimeout","clear","Edit","Head","to","show","text","handler","getBack","go","created","GET_COLLECTION"],"mappings":"yMAGMA,MAAM,4E,GAEDA,MAAM,kD,GACLA,MAAM,mB,GAGLA,MAAM,Q,GAGNA,MAAM,mB,EACT,eAAsC,UAA9BA,MAAM,QAAO,YAAQ,G,GAE5BA,MAAM,qB,GAKNA,MAAM,gC,0GAnBf,eAuBM,YAtBJ,eAqBM,MArBN,EAqBM,CAlBJ,eAcM,MAdN,EAcM,CAbJ,eAEK,KAFL,EAEK,eADA,EAAAC,cAAY,GAEjB,eAEM,MAFN,EAEM,eADD,EAAAC,WAAWC,MAAMC,MAAI,GAE1B,eAEM,MAFN,EAEM,CADJ,E,8BAAyC,EAAAC,MAAI,KAE/C,eAEI,IAFJ,EAEI,eADC,EAAAH,WAAWI,aAAW,GAE3B,eAA0D,GAAjDN,MAAM,sBAAuBO,QAAS,EAAAA,S,sBAEjD,eAEM,MAFN,EAEM,CADJ,eAAuC,GAA/BC,aAAc,EAAAN,WAAWO,I,oGAY1B,GACbC,MAAO,CACLR,WAAY,CACVS,KAAMC,OACNC,UAAU,GAEZN,QAAS,CACPI,KAAMG,QAGVC,WAAY,CAAEC,QAAA,KAAOC,UAAA,MACrBC,SAAU,iCACL,eAAW,CAAC,UADT,IAENb,KAFQ,WAGN,OAAOc,OAAOC,KAAKlB,WAAWmB,WAC3BC,OAAOF,KAAKG,MACZC,WAELvB,aAPQ,WAQN,OAAOmB,KAAKlB,WAAWE,MAAQ,mB,UC/CrC,EAAOqB,OAASA,EAChB,EAAOC,UAAY,kBAEJ,U,6DCRf,W,oCCAA,W,4DCES1B,MAAM,Q,EAIT,eAAM,mB,GACFA,MAAM,oB,EACR,eAAoC,cAA5B,uBAAmB,G,GACtBA,MAAM,qC,sGARjB,eAaM,YAZJ,eAEM,MAFN,EAEM,CADJ,eAAoD,GAA7CE,WAAY,EAAAA,WAAaK,QAAS,EAAAA,S,mCAE3C,eAQM,YAPJ,EACA,eAKK,KALL,EAKK,CAJH,EACA,eAEM,MAFN,EAEM,CADJ,eAAiC,GAA1BL,WAAY,EAAAA,YAAU,+B,qICR9BF,MAAM,a,GAEFA,MAAM,uC,GAGNA,MAAM,sC,GA2BNA,MAAM,sC,gIAjCjB,eAuDM,OAvDAA,MAAK,iDAA6B,EAAA2B,MAA7B,iBAA2C,EAAAC,a,CACpD,eAqDM,MArDN,EAqDM,CApDJ,eAmDO,QAnDA,SAAM,8CAAU,EAAAC,gBAAA,EAAAA,eAAA,qBAAc,e,CACnC,eAEM,MAFN,EAEM,CADJ,eAAqB,GAAVpB,GAAI,EAAAA,IAAE,iBAEnB,eAYM,MAZN,EAYM,C,eAXJ,eAKE,S,qDAJS,EAAAqB,iBAAiB1B,KAAI,IAC9BO,KAAK,OACLF,GAAG,gBACFT,MAAK,sCAAkB,EAAA8B,iBAAiB1B,MAAI,Y,iBAHpC,EAAA0B,iBAAiB1B,QAK5B,eAIC,SAHC2B,IAAI,gBACH/B,MAAK,8CAA0B,EAAA4B,a,eAC5B,EAAAI,GAAE,0CAGV,eAYc,G,WAXH,EAAAF,iBAAiB3B,MAAMC,K,qDAAvB,EAAA0B,iBAAiB3B,MAAMC,KAAI,IACnC6B,YAAa,EAAAD,GAAE,iDAChBE,MAAM,OACNC,QAAQ,OACPC,QAAS,EAAAC,OACTC,YAAY,EACbtC,MAAM,mB,CAEWuC,OAAM,gBACrB,gBADyBA,EACzB,EADyBA,OACzB,MAD+B,C,8BAC5BA,EAAOnC,MAAI,O,+CAIlB,eAYM,MAZN,EAYM,C,eAXJ,eAKY,Y,qDAJD,EAAA0B,iBAAiBxB,YAAW,IACpCN,MAAK,sCAAkB,EAAA8B,iBAAiBxB,aAAW,WACpDG,GAAG,gBACH+B,KAAK,K,iBAHI,EAAAV,iBAAiBxB,eAK5B,eAIC,SAHEN,MAAK,8CAA0B,EAAA4B,YAChCG,IAAI,iB,eACA,EAAAC,GAAE,iDAGV,eAMS,UALPrB,KAAK,SACLX,MAAM,iCACLyC,SAAU,EAAAA,UACZ,aAED,M,iGAYO,GACb1B,WAAY,CAAE2B,WAAA,KAAUC,YAAA,QACxBjC,MAAO,CACLD,GAAI,CACFE,KAAMiC,OACN/B,UAAU,GAEZX,WAAY,CACVS,KAAMC,OACNC,UAAU,IAGdgC,KAZa,WAaX,MAAO,CACLC,SAAS,EACThB,iBAAkB,kBAAKV,KAAKlB,cAGhCgB,SAAU,iCACL,eAAW,CAAC,SAAU,QAAS,YAAa,OAAQ,aADjD,IAEN6B,QAFQ,WAEE,aACR,OACE,UAAA3B,KAAKiB,OAAOW,MAAK,SAAAC,GAAC,OAAKA,EAAG7C,OAAS,EAAK0B,iBAAiB3B,MAAMC,eAA/D,eACIK,MAAO,GAGfgC,SARQ,WASN,OAAwB,GAAjBrB,KAAK2B,SAAiB3B,KAAK0B,WAGtCI,QAAS,iCACJ,eAAW,CAAC,qBAAsB,kBAAmB,kBADnD,IAECC,iBAFC,WAEkB,wKACjB,EAAKC,mBAAmB,CAC5B3C,GAAI,EAAKqB,iBAAiBrB,GAC1BL,KAAM,EAAK0B,iBAAiB1B,KAC5BE,YAAa,EAAKwB,iBAAiBxB,YACnC+C,SAAU,EAAKN,QACfO,MAAO,EAAKxB,iBAAiBwB,QANR,8CASnBC,mBAXC,WAWoB,wKACnB,EAAKC,gBAAgB,CACzB/C,GAAI,EAAKqB,iBAAiBrB,GAC1BL,KAAM,EAAK0B,iBAAiB1B,KAC5BE,YAAa,EAAKwB,iBAAiBxB,YACnC+C,SAAU,EAAKN,QACfO,MAAO,EAAKxB,iBAAiBwB,QANN,8CASrBzB,eApBC,WAoBgB,oKAEnB,EAAKiB,SAAU,IACXlC,OAAO6C,KAAK,EAAKC,KAAKC,MAAMC,MAAMC,OAAOC,OAAS,GAHnC,gCAImB,EAAKJ,KAAKK,SAJ7B,cAIjB,EAAKjC,iBAAiBwB,MAJL,OAKjB,EAAKxB,iBAAiBwB,MAAQ,EAAKxB,iBAAiBwB,MAAMU,WAAW,GAAGC,SAASC,KAAKC,IAAI/D,KALzE,SAMX,EAAKgE,aAAa,EAAKtC,iBAAiBrB,IAN7B,WAQf,EAAK4D,QARU,kCAQK,EAAKd,qBARV,iDASR,EAAKJ,mBATG,QAUnB,EAAKmB,QAAQC,KAAb,sBAAiC,EAAKC,OAAOC,OAAOhE,KAVjC,qDAYnB,EAAKiE,OAAOC,MAAM,KAAMV,SAASpB,KAAKsB,KACtCS,WAAW,EAAKF,OAAOG,MAAO,KAbX,yBAenB,EAAK/B,SAAU,EAfI,mF,UC9G3B,EAAOrB,OAAS,EAChB,EAAOC,UAAY,kBAEJ,QFcA,GACbX,WAAY,CAAE+D,OAAMC,KAAA,QACpBlC,KAFa,WAGX,MAAO,CACL3C,WAAY,OAGhBgB,SAAU,CACRX,QADQ,WAEN,MAAO,CACL,CACEyE,GAAI,GACJhF,MAAO,iCACPiF,MAAM,EACNC,KAAM,YACNC,QAAS/D,KAAKgE,YAKtBlC,QAAS,iCACJ,eAAW,CAAC,uBAAwB,oBADlC,IAELkC,QAFO,WAGLhE,KAAKkD,QAAQe,IAAI,MAGfC,QA1BO,WA0BG,wKACU,EAAKC,eAAe,EAAKf,OAAOC,OAAOhE,IADjD,OACd,EAAKP,WADS,sDG7ClB,EAAOuB,OAASA,EAED,gB","file":"js/chunk-65be4cf8.c2751f8c.js","sourcesContent":["<template>\r\n  <div>\r\n    <div\r\n      class=\"card flex-md-nowrap flex-wrap-reverse flex-row flex-1-1 mb-4 box-shadow \"\r\n    >\r\n      <div class=\"card-body d-flex flex-column align-items-start\">\r\n        <h3 class=\"card-title mb-0\">\r\n          {{ getValidName }}\r\n        </h3>\r\n        <div class=\"mb-1\">\r\n          {{ collection.topic.name }}\r\n        </div>\r\n        <div class=\"mb-2 text-muted\">\r\n          <strong class=\"me-1\">Создано:</strong>{{ date }}\r\n        </div>\r\n        <p class=\"card-text mb-auto\">\r\n          {{ collection.description }}\r\n        </p>\r\n        <Buttons class=\"flex-md-nowrap mt-3\" :buttons=\"buttons\" />\r\n      </div>\r\n      <div class=\"card-img-right image-wrapper\">\r\n        <Image :idCollection=\"collection.id\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Image from \"@/components/collection/Image.vue\";\r\nimport Buttons from \"@/components/button/Buttons.vue\";\r\n\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  props: {\r\n    collection: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    buttons: {\r\n      type: Array\r\n    }\r\n  },\r\n  components: { Image, Buttons },\r\n  computed: {\r\n    ...mapGetters([\"lang\"]),\r\n    date() {\r\n      return moment(this.collection.createdAt)\r\n        .locale(this.lang)\r\n        .fromNow();\r\n    },\r\n    getValidName() {\r\n      return this.collection.name || \"Без названия\";\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.image-wrapper {\r\n  max-height: 300px;\r\n  max-width: 520px;\r\n}\r\n</style>\r\n","import { render } from \"./CollectionHead.vue?vue&type=template&id=1146aad0&scoped=true\"\nimport script from \"./CollectionHead.vue?vue&type=script&lang=js\"\nexport * from \"./CollectionHead.vue?vue&type=script&lang=js\"\n\nimport \"./CollectionHead.vue?vue&type=style&index=0&id=1146aad0&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-1146aad0\"\n\nexport default script","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Edit.vue?vue&type=style&index=0&id=7eb79e8d&land=scss&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CollectionHead.vue?vue&type=style&index=0&id=1146aad0&scoped=true&lang=css\"","<template>\r\n  <div>\r\n    <div class=\"mb-2\">\r\n      <Head :collection=\"collection\" :buttons=\"buttons\" />\r\n    </div>\r\n    <div>\r\n      <hr />\r\n      <h3 class=\"text-center mb-5\">\r\n        <strong> Изменить коллекцию</strong>\r\n        <div class=\"d-flex justify-content-center p-2\">\r\n          <Edit :collection=\"collection\" />\r\n        </div>\r\n      </h3>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Head from \"@/components/collection/CollectionHead.vue\";\r\nimport Edit from \"@/components/collection/change/Edit.vue\";\r\n\r\nimport { mapActions } from \"vuex\";\r\nexport default {\r\n  components: { Edit, Head },\r\n  data() {\r\n    return {\r\n      collection: null\r\n    };\r\n  },\r\n  computed: {\r\n    buttons() {\r\n      return [\r\n        {\r\n          to: ``,\r\n          class: \"btn btn-lg btn-outline-primary\",\r\n          show: true,\r\n          text: `Вернуться`,\r\n          handler: this.getBack\r\n        }\r\n      ];\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\"GET_COLLECTION_ITEMS\", \"GET_COLLECTION\"]),\r\n    getBack() {\r\n      this.$router.go(-1);\r\n    }\r\n  },\r\n  async created() {\r\n    this.collection = await this.GET_COLLECTION(this.$route.params.id);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n","<template>\r\n  <div :class=\"`card w-100 shadow-sm bg-${theme} text-${themeText}`\">\r\n    <div class=\"card-body\">\r\n      <form @submit.prevent=\"editCollection\">\r\n        <div class=\"form-outline border rounded-3 mb-2 \">\r\n          <DropZone :id=\"id\" />\r\n        </div>\r\n        <div class=\"form-outline border rounded-3 mb-2\">\r\n          <input\r\n            v-model=\"editedCollection.name\"\r\n            type=\"text\"\r\n            id=\"form8Example1\"\r\n            :class=\"`form-control ${editedCollection.name && 'active'}`\"\r\n          />\r\n          <label\r\n            for=\"form8Example1\"\r\n            :class=\"`form-label fs-6 text-${themeText}`\"\r\n            >{{ $t(\"component.collection.create.name\") }}</label\r\n          >\r\n        </div>\r\n        <Multiselect\r\n          v-model=\"editedCollection.topic.name\"\r\n          :placeholder=\"$t('component.collection.create.searchPlaceholder')\"\r\n          label=\"name\"\r\n          trackBy=\"name\"\r\n          :options=\"topics\"\r\n          :searchable=\"true\"\r\n          class=\"mb-2 text-black\"\r\n        >\r\n          <template v-slot:option=\"{ option }\">\r\n            {{ option.name }}\r\n          </template>\r\n        </Multiselect>\r\n\r\n        <div class=\"form-outline border rounded-3 mb-2\">\r\n          <textarea\r\n            v-model=\"editedCollection.description\"\r\n            :class=\"`form-control ${editedCollection.description && 'active'}`\"\r\n            id=\"form4Example3\"\r\n            rows=\"4\"\r\n          ></textarea>\r\n          <label\r\n            :class=\"`form-label fs-6 text-${themeText}`\"\r\n            for=\"form4Example3\"\r\n            >{{ $t(\"component.collection.create.description\") }}</label\r\n          >\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          class=\"w-100 btn btn-lg btn-secondary\"\r\n          :disabled=\"disabled\"\r\n        >\r\n          Изменить\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DropZone from \"@/components/dropZone/DropZone.vue\";\r\nimport Multiselect from \"@vueform/multiselect\";\r\n\r\nimport { mapActions, mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n  components: { DropZone, Multiselect },\r\n  props: {\r\n    id: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    collection: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      blocked: false,\r\n      editedCollection: { ...this.collection }\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"topics\", \"theme\", \"themeText\", \"uppy\", \"isAdmin\"]),\r\n    topicId() {\r\n      return (\r\n        this.topics.find(el => el.name === this.editedCollection.topic.name)\r\n          ?.id || -1\r\n      );\r\n    },\r\n    disabled() {\r\n      return this.topicId == -1 || this.blocked;\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions([\"EDIT_MY_COLLECTION\", \"EDIT_COLLECTION\", \"DELETE_IMAGE\"]),\r\n    async editMyCollection() {\r\n      await this.EDIT_MY_COLLECTION({\r\n        id: this.editedCollection.id,\r\n        name: this.editedCollection.name,\r\n        description: this.editedCollection.description,\r\n        id_topic: this.topicId,\r\n        image: this.editedCollection.image\r\n      });\r\n    },\r\n    async editCollectionById() {\r\n      await this.EDIT_COLLECTION({\r\n        id: this.editedCollection.id,\r\n        name: this.editedCollection.name,\r\n        description: this.editedCollection.description,\r\n        id_topic: this.topicId,\r\n        image: this.editedCollection.image\r\n      });\r\n    },\r\n    async editCollection() {\r\n      try {\r\n        this.blocked = true;\r\n        if (Object.keys(this.uppy.store.state.files).length > 0) {\r\n          this.editedCollection.image = await this.uppy.upload();\r\n          this.editedCollection.image = this.editedCollection.image.successful[0].response.body.msg.name;\r\n          await this.DELETE_IMAGE(this.editedCollection.id);\r\n        }\r\n        if (this.isAdmin) await this.editCollectionById();\r\n        else await this.editMyCollection();\r\n        this.$router.push(`/collection/${this.$route.params.id}`);\r\n      } catch (error) {\r\n        this.$toast.error(error.response.data.msg);\r\n        setTimeout(this.$toast.clear, 3000);\r\n      } finally {\r\n        this.blocked = false;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style land=\"scss\" scoped>\r\nimg {\r\n  width: 100%;\r\n  height: 225px;\r\n  object-fit: contain;\r\n}\r\nlabel {\r\n  font-size: 12px;\r\n}\r\n</style>\r\n","import { render } from \"./Edit.vue?vue&type=template&id=7eb79e8d&scoped=true\"\nimport script from \"./Edit.vue?vue&type=script&lang=js\"\nexport * from \"./Edit.vue?vue&type=script&lang=js\"\n\nimport \"./Edit.vue?vue&type=style&index=0&id=7eb79e8d&land=scss&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-7eb79e8d\"\n\nexport default script","import { render } from \"./CollectionEdit.vue?vue&type=template&id=f056aef4\"\nimport script from \"./CollectionEdit.vue?vue&type=script&lang=js\"\nexport * from \"./CollectionEdit.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}