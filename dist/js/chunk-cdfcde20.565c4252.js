(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cdfcde20"],{"3ea2":function(e,t,c){"use strict";c("99af"),c("b0c0"),c("a4d3"),c("e01a");var o=c("7a23");Object(o["A"])("data-v-0a77bc26");var n={class:"card-body d-flex flex-column align-items-start"},i={class:"card-title mb-0"},l={class:"mb-1"},a={class:"mb-2 "},r={class:"me-1"},d={class:"card-text mb-auto"},s={class:"card-img-right image-wrapper"};function u(e,t,c,u,b,m){var p,O,v,j,f,h=Object(o["G"])("Buttons"),x=Object(o["G"])("Image");return Object(o["x"])(),Object(o["h"])("div",null,[Object(o["i"])("div",{class:Object(o["r"])("card bg-".concat(e.theme," text-").concat(e.textTheme," flex-md-nowrap flex-wrap-reverse flex-row flex-1-1 mb-4 box-shadow"))},[Object(o["i"])("div",n,[Object(o["i"])("h3",i,Object(o["J"])(m.getValidName),1),Object(o["i"])("div",l,Object(o["J"])(null===(p=c.collection)||void 0===p||null===(O=p.topic)||void 0===O?void 0:O.name),1),Object(o["i"])("div",a,[Object(o["i"])("strong",r,Object(o["J"])(e.$t("component.collection.collection-head.title-1")),1),Object(o["j"])(Object(o["J"])(m.date),1)]),Object(o["i"])("p",d,Object(o["J"])(null===(v=c.collection)||void 0===v?void 0:v.description),1),Object(o["k"])(h,{class:"flex-md-nowrap mt-3",buttons:c.buttons},null,8,["buttons"])]),Object(o["i"])("div",s,[null!==(j=c.collection)&&void 0!==j&&j.id?(Object(o["x"])(),Object(o["f"])(x,{key:0,idCollection:null===(f=c.collection)||void 0===f?void 0:f.id},null,8,["idCollection"])):Object(o["g"])("",!0)])],2)])}Object(o["y"])();var b=c("5530"),m=c("aa14"),p=c("9666"),O=c("5502"),v={props:{collection:{type:Object,required:!0},buttons:{type:Array}},components:{Image:m["a"],Buttons:p["a"]},computed:Object(b["a"])(Object(b["a"])({},Object(O["c"])(["lang","theme","themeText"])),{},{date:function(){var e;return moment(null===(e=this.collection)||void 0===e?void 0:e.createdAt).locale(this.lang).fromNow()},getValidName:function(){var e;return(null===(e=this.collection)||void 0===e?void 0:e.name)||this.$t("component.collection.collection-head.title-2")}})};c("ae7e");v.render=u,v.__scopeId="data-v-0a77bc26";t["a"]=v},accb:function(e,t,c){"use strict";c.r(t);var o=c("7a23"),n={class:"mb-2"},i=Object(o["i"])("hr",null,null,-1),l={class:"text-center mb-5"},a={class:"d-flex justify-content-center p-2"};function r(e,t,c,r,d,s){var u=Object(o["G"])("Head"),b=Object(o["G"])("Edit");return Object(o["x"])(),Object(o["h"])("div",null,[Object(o["i"])("div",n,[Object(o["k"])(u,{collection:d.collection,buttons:s.buttons},null,8,["collection","buttons"])]),Object(o["i"])("div",null,[i,Object(o["i"])("h3",l,[Object(o["i"])("strong",null,Object(o["J"])(e.$t("view.collection-edit.title-1")),1),Object(o["i"])("div",a,[Object(o["k"])(b,{collection:d.collection},null,8,["collection"])])])])])}var d=c("1da1"),s=c("5530"),u=(c("96cf"),c("3ea2"));c("99af"),c("b0c0"),c("a4d3"),c("e01a");Object(o["A"])("data-v-51bf0bb7");var b={class:"card-body"},m={class:"form-outline border rounded-3 mb-2 "},p={class:"form-outline border rounded-3 mb-2"},O={class:"form-outline border rounded-3 mb-2"},v=["disabled"];function j(e,t,c,n,i,l){var a,r,d,s,u=Object(o["G"])("DropZone"),j=Object(o["G"])("Multiselect");return Object(o["x"])(),Object(o["h"])("div",{class:Object(o["r"])("card w-100 shadow-sm bg-".concat(e.theme," text-").concat(e.themeText))},[Object(o["i"])("div",b,[Object(o["i"])("form",{onSubmit:t[3]||(t[3]=Object(o["V"])((function(){return l.editCollection&&l.editCollection.apply(l,arguments)}),["prevent"]))},[Object(o["i"])("div",m,[Object(o["k"])(u,{id:c.id},null,8,["id"])]),Object(o["i"])("div",p,[Object(o["U"])(Object(o["i"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.editedCollection.name=e}),type:"text",id:"form8Example1",class:Object(o["r"])("form-control ".concat((null===(a=i.editedCollection)||void 0===a?void 0:a.name)&&"active"," text-").concat(e.themeText))},null,2),[[o["P"],i.editedCollection.name]]),Object(o["i"])("label",{for:"form8Example1",class:Object(o["r"])("form-label fs-6 text-".concat(e.themeText))},Object(o["J"])(e.$t("component.collection.change.edit.name")),3)]),null!==(r=i.editedCollection)&&void 0!==r&&null!==(d=r.topic)&&void 0!==d&&d.name?(Object(o["x"])(),Object(o["f"])(j,{key:0,modelValue:i.editedCollection.topic.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.editedCollection.topic.name=e}),placeholder:e.$t("component.collection.change.edit.search-1"),label:"name",trackBy:"name",options:e.topics,searchable:!0,class:"mb-2 text-black"},{option:Object(o["T"])((function(e){var t=e.option;return[Object(o["j"])(Object(o["J"])(t.name),1)]})),_:1},8,["modelValue","placeholder","options"])):Object(o["g"])("",!0),Object(o["i"])("div",O,[Object(o["U"])(Object(o["i"])("textarea",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.editedCollection.description=e}),class:Object(o["r"])("form-control ".concat((null===(s=i.editedCollection)||void 0===s?void 0:s.description)&&"active"," text-").concat(e.themeText)),id:"form4Example3",rows:"4"},null,2),[[o["P"],i.editedCollection.description]]),Object(o["i"])("label",{class:Object(o["r"])("form-label fs-6 text-".concat(e.themeText)),for:"form4Example3"},Object(o["J"])(e.$t("component.collection.change.edit.description")),3)]),Object(o["i"])("button",{type:"submit",class:"w-100 btn btn-lg btn-secondary",disabled:l.disabled},Object(o["J"])(e.$t("component.collection.change.edit.button")),9,v)],32)])],2)}Object(o["y"])();c("a9e3"),c("7db0"),c("b64b");var f=c("e583"),h=c("a306"),x=c("5502"),g={components:{DropZone:f["a"],Multiselect:h["a"]},props:{id:{type:Number,required:!0},collection:{type:Object,required:!0}},data:function(){return{blocked:!1,editedCollection:Object(s["a"])({},this.collection)}},computed:Object(s["a"])(Object(s["a"])({},Object(x["c"])(["topics","theme","themeText","uppy","isAdmin"])),{},{topicId:function(){var e,t=this;return(null===(e=this.topics.find((function(e){var c,o;return e.name===(null===(c=t.editedCollection)||void 0===c||null===(o=c.topic)||void 0===o?void 0:o.name)})))||void 0===e?void 0:e.id)||-1},disabled:function(){return-1==this.topicId||this.blocked}}),watch:{collection:function(e){this.editedCollection=e}},methods:Object(s["a"])(Object(s["a"])({},Object(x["b"])(["EDIT_MY_COLLECTION","EDIT_COLLECTION","DELETE_IMAGE"])),{},{editMyCollection:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var c,o,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.EDIT_MY_COLLECTION({id:null===(c=e.editedCollection)||void 0===c?void 0:c.id,name:null===(o=e.editedCollection)||void 0===o?void 0:o.name,description:null===(n=e.editedCollection)||void 0===n?void 0:n.description,id_topic:e.topicId,image:null===(i=e.editedCollection)||void 0===i?void 0:i.image});case 2:case"end":return t.stop()}}),t)})))()},editCollectionById:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var c,o,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.EDIT_COLLECTION({id:null===(c=e.editedCollection)||void 0===c?void 0:c.id,name:null===(o=e.editedCollection)||void 0===o?void 0:o.name,description:null===(n=e.editedCollection)||void 0===n?void 0:n.description,id_topic:e.topicId,image:null===(i=e.editedCollection)||void 0===i?void 0:i.image});case 2:case"end":return t.stop()}}),t)})))()},editCollection:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.blocked=!0,!(Object.keys(e.uppy.store.state.files).length>0)){t.next=9;break}return t.next=5,e.uppy.upload();case 5:return e.editedCollection.image=t.sent,e.editedCollection.image=e.editedCollection.image.successful[0].response.body.msg.name,t.next=9,e.DELETE_IMAGE(e.editedCollection.id);case 9:if(!e.isAdmin){t.next=14;break}return t.next=12,e.editCollectionById();case 12:t.next=16;break;case 14:return t.next=16,e.editMyCollection();case 16:e.$router.push("/collection/".concat(e.$route.params.id)),t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](0),e.$toast.error((null===(c=t.t0.response.data)||void 0===c?void 0:c.msg)||e.$t("component.collection.change.edit.error")),setTimeout(e.$toast.clear,3e3);case 23:return t.prev=23,e.blocked=!1,t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[0,19,23,26]])})))()}})};c("fc56");g.render=j,g.__scopeId="data-v-51bf0bb7";var C=g,w={components:{Edit:C,Head:u["a"]},data:function(){return{collection:null}},computed:Object(s["a"])(Object(s["a"])({},Object(x["c"])(["user","isAdmin"])),{},{buttons:function(){return[{to:"",class:"btn btn-lg btn-outline-primary",show:!0,text:this.$t("view.collection-edit.buttons.title-1"),handler:this.getBack}]},isMyPage:function(){var e,t;return(null===(e=this.user)||void 0===e?void 0:e.id)==(null===(t=this.collection)||void 0===t?void 0:t.id_user)},restricted:function(){return!(this.user.id&&(this.isMyPage||this.isAdmin))}}),methods:Object(s["a"])(Object(s["a"])({},Object(x["b"])(["GET_COLLECTION"])),{},{getBack:function(){this.$router.go(-1)}}),created:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.GET_COLLECTION(e.$route.params.id);case 2:e.collection=t.sent,e.collection&&!e.restricted||e.$router.push("/page404");case 4:case"end":return t.stop()}}),t)})))()}};w.render=r;t["default"]=w},ae7e:function(e,t,c){"use strict";c("c8d3")},b25f:function(e,t,c){},c8d3:function(e,t,c){},fc56:function(e,t,c){"use strict";c("b25f")}}]);
//# sourceMappingURL=chunk-cdfcde20.565c4252.js.map